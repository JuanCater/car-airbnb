<h1 class="text-center mt-3">Available Cars</h1>

<%= form_with url: cars_path, method: :get, class: "d-flex" do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control",
    placeholder: "Find a car"
  %>
  <%= submit_tag "Search", class: "btn btn-dark text-light" %>
<% end %>

<div class="mt-4 mb-4" style="width: 100%; height: 500px;"
  data-controller="map"
  data-map-markers-value="<%= @markers.to_json %>"
  data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
</div>

<div class="container">
  <div class="row">
      <% @cars.each do |car| %>
        <div class = "col-3">
        <div class="d-flex">
          <div class="card border-0 me-lg-4 mb-lg-0 mb-4 d-flex justify-content-center">
            <div class="backgroundEffect">
            </div>
            <div class="pic"> <img class="" src='<%= cl_image_path car.photos[0].key, height: 350, width: 400, crop: :fill %>' alt="">
            </div>
            <div class="content">
              <p class="h-1 mt-4"> <%= "#{car.brand} #{car.model}, #{car.year}" %></p> <p class="text-muted mt-3">Lorem ipsum dolor sit, amet consectetur adipisicing elit. Facere, veritatis. Eveniet in vel illo, mollitia nemo architecto, voluptates ullam molestias.</p>
              <div class="d-flex align-items-center justify-content-between mt-3 pb-3">
                <div class="btn btn-primary">Read More<span class="fas fa-arrow-right"></span>
                </div>
                <div class="d-flex align-items-center justify-content-center foot">
                  <p class="admin"><%= "#{car.price}/day" %></p>
                </div>
              </div>
            </div>
          </div>
        </div>
    </div>
      <% end %>
  </div>
</div>
<p class="btn btn-dark text-light">Create new car<%= link_to "", new_car_path%></p>

<p class="btn btn-dark text-light"><%= link_to "Create new car", new_car_path%></a>
